<!DOCTYPE html>
<html>
<head>   
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Renan Carvalho JavaScript blog. - JavaScript - CoffeeScript blog.</title>
    <meta name="description" content="Renan Carvalho Js" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />
    <!-- This is for syntax highlight -->
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css">
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

</head>
<body class="home-template">

    
    <main class="content" role="main">

    <article class="post">
        <header class="post-header">
            <a id="blog-logo" href="">
                
                    <span class="blog-title">Renan Carvalho JavaScript blog.</span>
                 
            </a>
        </header>
        
        <span class="post-meta">
        	<time datetime="2014-07-19">19 Jul 2014</time>
        	
        		on
	        	
	        	    javascript
	        	
	        
       	</span>

        <h1 class="post-title">IS IT REALLY HARD TO UNDERSTAND CLOSURES?</h1>

        <section class="post-content">
            <p>What is closure and why should I use it?
When I first started studing Javascript, I saw myself spending a lot of time trying to figured out what was  closure, how it worked and the most important thing, <strong>Why should I use Closures?</strong>.</p>

<blockquote>
<p>The main idea here is try to show the way that I started to understand closure, and also make you spend less time than me.</p>
</blockquote>

<p>Let&#39;s start it the easy way.</p>

<p>Imagine that we&#39;d like to create a class called Car. <code>Just make sure that a Javascript class is not like any other language class</code>. We can have a code like this:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car</span> <span class="p">(</span><span class="nx">pModel</span><span class="p">,</span> <span class="nx">pColor</span><span class="p">,</span> <span class="nx">pYear</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">pModel</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">pColor</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">pYear</span><span class="p">;</span>     
    <span class="kd">var</span> <span class="nx">getTypeOfCar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;My new Car is &quot;</span> <span class="o">+</span> <span class="nx">_model</span><span class="p">)</span>
    <span class="p">}</span>    
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">brandNewCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="s2">&quot;Ford&quot;</span><span class="p">,</span> <span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="mi">2014</span><span class="p">);</span></code></pre></div>
 

<p>Try it yourself on console, <code>brandNewCar.getTypeOfCar()</code>. You&#39;ll notice that it is undefined, it doesn&#39;t exist. But what happend?</p>

<p>The variables are just available when the function is being executed, after that the browser (more especific, the virtual machine running inside the browser) clean up anything after the function finishes its own execution. That&#39;s why you can not access them.</p>

<p>To fix that you have to instead of variables, create attributes inside the function (Class Car). This way you can access the values inside the Class.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car</span> <span class="p">(</span><span class="nx">pModel</span><span class="p">,</span> <span class="nx">pColor</span><span class="p">,</span> <span class="nx">pYear</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">pModel</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">pColor</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">pYear</span><span class="p">;</span>  
    <span class="k">this</span><span class="p">.</span><span class="nx">getTypeOfCar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;My new Car is a brand new &quot;</span> <span class="o">+</span> <span class="nx">model</span><span class="p">)</span>
    <span class="p">}</span>    
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">brandNewCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="s2">&quot;Ford&quot;</span><span class="p">,</span> <span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="mi">2014</span><span class="p">);</span></code></pre></div>
 

<p>Now if we call the <code>brandNewCar.getTypeOfCar()</code> function, &quot;My new Car is a brand new Ford&quot;, it will appear on console. Moreover, not only the method is available, but also every attribute is available as well.</p>

<h3>Putting Closure on Scene</h3>

<p>Let&#39;s make things more useful. Imagine that we don&#39;t want to expose all the content from our Class, we&#39;d like to have some private and public variables and/or function.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car</span> <span class="p">(</span><span class="nx">pModel</span><span class="p">,</span> <span class="nx">pColor</span><span class="p">,</span> <span class="nx">pYear</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">pModel</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">pColor</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">pYear</span><span class="p">;</span>     
    <span class="k">return</span> <span class="p">{</span> <span class="nx">getTypeOfCar</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;My new Car is a brand new &quot;</span> <span class="o">+</span> <span class="nx">model</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>    
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">brandNewCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="s2">&quot;Ford&quot;</span><span class="p">,</span> <span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="mi">2014</span><span class="p">);</span></code></pre></div>
 

<p>Run the code to see that only <code>brandNewCar.getTypeOfCar()</code> is available to you, if you try to <code>brandNewCar.model</code>, it shows <code>undefined</code>. This is because the variable model, as said before, is only available when the function is being executed, now it is a kind of private variable of our Class Car. Ask yourself, how the function <code>getTypeOfCar()</code> can access the variable <code>model</code>? Closure is the answer.</p>

<h3>What is Closure?</h3>

<p>Simple like that: Closure is a function that has access to a private variable on the inner scope function. Is it getting worse? Open one beer and just relax (My favorite one is Blue Moon).</p>

<p>In our example, <code>getTypeOfCar()</code> receives a function that has access to the lexical scope, and then use a model variable declared.</p>

<p>The function <code>getTypeOfCar()</code> is a kind of closure! Closures are blocks of code that can be executed by keeping the original context that they were created (here the <code>getTypeOfCar()</code> is the closure), and this simple example shows one of the benefits of this technique (private and public members).</p>

<p>Other Example of Closure:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">GiftList</span> <span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">List</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">orderList</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
                <span class="k">return</span> <span class="nx">List</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span> 
                <span class="nx">addNewGift</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">gift</span><span class="p">){</span>
                    <span class="nx">List</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">gift</span><span class="p">);</span>
                <span class="p">},</span>
         <span class="nx">seeMyList</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">return</span> <span class="nx">orderList</span><span class="p">(</span><span class="nx">List</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span> 
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GiftList</span><span class="p">();</span>
    <span class="nx">list</span><span class="p">.</span><span class="nx">addNewGift</span><span class="p">(</span><span class="s2">&quot;Purse&quot;</span><span class="p">);</span>
    <span class="nx">list</span><span class="p">.</span><span class="nx">addNewGift</span><span class="p">(</span><span class="s2">&quot;Shoes&quot;</span><span class="p">);</span>
    <span class="nx">list</span><span class="p">.</span><span class="nx">addNewGift</span><span class="p">(</span><span class="s2">&quot;Watch&quot;</span><span class="p">);</span>
    <span class="nx">list</span><span class="p">.</span><span class="nx">seeMyList</span><span class="p">();</span>
    <span class="c1">// &quot;Purse - Shoes - Watch&quot;</span></code></pre></div>

<p>It sounds simple now, but I spent a few days to understand it at first.</p>

<p>See you guys. Take care!</p>

        </section>

        

        <footer class="post-footer">
        	<!-- If we want to display author's name and bio -->
            
                <section class="author">
                	<header> <a href=""> <img class="profile" src="/assets/images/profile.png" alt="Author's profile picture"></a></header>
                	<article>
                		<!-- Author Name -->
                    	<h4> Renan Carvalho </h4>
                    	<!-- Author Bio -->
                    	<p> 
                    		Começou a desenvolver software com 17 anos, e trabalha há 2 anos somente com frameworks javascript.
                            Surfista e músico frustrado e um adorador de cerveja.
						</p>	
						<p> 
								Started as a software developer by the age of 17, and have been working with Javascript frameworks for 2 years. Frustrated surtfist and musician and appreciator of good beer.
                    	</p>
                    </article>
                </section>                
            

            <section class="share">
                <h4>Compartilhe</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=IS IT REALLY HARD TO UNDERSTAND CLOSURES?&amp;url=wwww.rcarvalhojs.com/javascript/2014/07/19/Is-that-really-hard-understand-closure.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=wwww.rcarvalhojs.com/javascript/2014/07/19/Is-that-really-hard-understand-closure.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=wwww.rcarvalhojs.com/javascript/2014/07/19/Is-that-really-hard-understand-closure.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
        	
        </footer>

		<div id="disqus_thread"></div>
			<script type="text/javascript">
			    var disqus_shortname = 'rcarvalhojscom';

			    (function () {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </article>


    <footer class="site-footer">
        <a class="subscribe icon-feed" href="rss.xml"><span class="tooltip">Subscribe!</span></a>
        <div class="inner">
             <section class="copyright"><a href="">Renan Carvalho JavaScript blog.</a> &copy; </section>
            
        </div>
    </footer>

    
    <script type="text/javascript" src="/assets/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>   
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-51790311-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
	</script>
	<script type="text/javascript">    
        var disqus_shortname = 'rcarvalhojscom';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();    
    </script>
</body>

    
    
</html>
